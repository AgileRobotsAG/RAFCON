#!/bin/sh

[ -d "./tmp" ]
tmp_exists=$?
version=value=$(<VERSION)

find 'source/rafcon' -iname '*.glade' -exec intltool-extract --type=gettext/glade --local {} \;
mv tmp glade
find 'source/rafcon' -iname '*.py' | xargs xgettext --language=Python --keyword=_ --keyword=N_ --output=rafcon.pot --output-dir=source/rafcon/locale --default-domain=rafcon --copyright-holder "DLR-RMC" --package-name RAFCON --package-version=$version --msgid-bugs-address=rafcon@dlrd.de ./glade/*.h
mv glade tmp

if (( tmp_exists == 1 )); then
  rm -r "./tmp"
fi
