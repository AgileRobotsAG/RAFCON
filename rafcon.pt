#
# RAFCON -- RMC awesome flow control
#

PTVERSION           = 2
NAME                = rafcon 
MAINTAINER          = Sebastian Brunner <sebastian.brunner@dlr.de>, Rico Belder <rico.belder@dlr.de>, Franz Steinmetz <franz.steinmetz@dlr.de>
DESCRIPTION         = RMC awesome flow control -- This is a package to program and visualize complex robot tasks.
DOCUMENTATION       = https://rmintra01.robotic.dlr.de/wiki/RAFCON
MANTIS_PROJECT      = DLR Flow-Control
SUPPORTED_LANGUAGES = python
DEPENDS = 
DEPENDS.sled11*     = gtk_etc==0, gtk_etc_python==0, python-jsonconversion==0.2, python_yaml_configuration==0.0
DEPENDS.osl*        = python-gtkmvc==1.99, python-gaphas==0.7, python-jsonconversion==0.2, python_yaml_configuration==0.0, sw.common.pango==1.40

ARCHS               = sled11-x86-gcc4.x, sled11-x86_64-gcc4.x, osl42-x86_64
PYTHON_PATHS        = ${PKGROOT}/source
ADDITIONAL_ENV.osl* = RAFCON_LIB_PATH=${PKGROOT}/share/libraries, RAFCON_CHECK_INSTALLATION=True, PATH=${PKGROOT}/bin:$${PATH}
ADDITIONAL_ENV.sled11* = RAFCON_LIB_PATH=${PKGROOT}/share/libraries, RAFCON_CHECK_INSTALLATION=True, PATH=${PKGROOT}/bin:/opt/python/python2.7/bin:$${PATH}

[pre-install]
python -m compileall -fq ./source/rafcon
python -m compileall -fq ./source/libraries

[install]
source/rafcon => source/rafcon
share | !*.pyc | !.gitignore => share
doc => doc
./VERSION => ./VERSION
bin/ | !rafcon_start | !rafcon_start_gui | !resave_state_machines  | !*.pyc => bin # Symlinks are recreated in post_install step

[post-install]
cd ${RMPM_INSTALL_DIR}/bin && ln -s ../source/rafcon/core/start.py rafcon_start && ln -s ../source/rafcon/gui/start.py rafcon_start_gui && ln -s ../source/rafcon/gui/resave_state_machines.py resave_state_machines
